/**
 * Dynamically import solid-client-authn-browser so that
 * this library doesn't have a hard dependency.
 *
 * @returns fetch function
 */
async function getSessionFetch(options) {
    if (options.fetch) {
        return options.fetch;
    }
    try {
        const { fetch: fetchFn } = await import(
        // @inrupt/solid-client-authn-browser is not in this code's direct dependencies,
        // we dynamically check whether it is in the caller's dependencies.
        // eslint-disable-next-line @typescript-eslint/ban-ts-comment
        // @ts-ignore
        // eslint-disable-next-line import/no-unresolved
        '@inrupt/solid-client-authn-browser');
        return fetchFn;
    }
    catch (e) {
        /* istanbul ignore next: @inrupt/solid-client-authn-browser is a devDependency, so this path is not hit in tests: */
        return fetch;
    }
}

export { getSessionFetch };
